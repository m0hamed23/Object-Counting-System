<div class="page-container">
    <div class="page-header">
      <h1>User Management</h1>
    </div>
  
    <div class="user-content">
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Username</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let user of users">
                        <td>{{ user.id }}</td>
                        <td>{{ user.username }}</td>
                        <td class="actions">
                            <button class="btn btn-secondary" (click)="editUser(user)">Edit</button>
                            <button class="btn btn-danger" (click)="deleteUser(user.id)">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <button class="btn btn-primary" (click)="showAddUserDialog()">Add User</button>
    </div>
  
    <dialog #userDialog class="dialog">
      <h3>{{ editingUser ? 'Edit' : 'Add' }} User</h3>
      <form [formGroup]="userForm" (ngSubmit)="saveUser()">
        <div class="form-group">
          <label for="username">Username</label>
          <input id="username" type="text" formControlName="username">
          <div *ngIf="f['username'].touched && f['username'].invalid" class="error-message">
            Username is required.
          </div>
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input id="password" type="password" formControlName="password" [placeholder]="passwordPlaceholder">
          <div *ngIf="f['password'].touched && f['password'].invalid" class="error-message">
            Password is required for new users (min 3 chars).
          </div>
        </div>
        <div class="dialog-buttons">
          <button type="button" class="btn btn-secondary" (click)="closeDialog()">Cancel</button>
          <button type="submit" class="btn btn-primary" [disabled]="userForm.invalid">Save</button>
        </div>
      </form>
    </dialog>
</div>